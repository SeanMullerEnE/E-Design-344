Version 4
SHEET 1 1880 680
WIRE -448 -112 -528 -112
WIRE -528 -80 -528 -112
WIRE -528 16 -528 0
WIRE 640 16 640 -32
WIRE -448 80 -528 80
WIRE -528 112 -528 80
WIRE -16 112 -48 112
WIRE 16 112 -16 112
WIRE 112 112 96 112
WIRE 144 112 112 112
WIRE 272 112 224 112
WIRE 704 112 704 48
WIRE 544 128 480 128
WIRE 640 128 640 96
WIRE 640 128 624 128
WIRE 672 128 640 128
WIRE 992 128 928 128
WIRE 1040 128 992 128
WIRE 1184 128 1120 128
WIRE 848 144 736 144
WIRE 672 160 656 160
WIRE -16 176 -16 112
WIRE 176 176 -16 176
WIRE 928 176 928 128
WIRE 1184 192 1184 128
WIRE -528 208 -528 192
WIRE 704 208 704 176
WIRE 992 208 992 128
WIRE 1136 208 992 208
WIRE 176 224 176 176
WIRE 112 240 112 112
WIRE 144 240 112 240
WIRE 272 256 272 112
WIRE 272 256 208 256
WIRE 528 256 272 256
WIRE 656 256 656 160
WIRE 656 256 608 256
WIRE 736 256 656 256
WIRE 848 256 848 144
WIRE 848 256 816 256
WIRE 880 256 848 256
WIRE 896 256 880 256
WIRE -48 272 -112 272
WIRE 96 272 32 272
WIRE 144 272 96 272
WIRE 96 304 96 272
WIRE 1184 304 1184 288
WIRE 928 336 928 272
WIRE 96 400 96 384
WIRE 144 400 96 400
WIRE 176 400 176 288
WIRE 176 400 144 400
WIRE 1184 400 1184 384
WIRE 144 432 144 400
FLAG -528 16 0
FLAG -528 208 0
FLAG -448 80 5V
IOPIN -448 80 Out
FLAG -448 -112 Vbat
IOPIN -448 -112 Out
FLAG 704 208 0
FLAG 704 48 5V
IOPIN 704 48 In
FLAG 480 128 5V
IOPIN 480 128 In
FLAG -112 272 Vbat
IOPIN -112 272 In
FLAG 640 -32 0
FLAG 144 432 0
FLAG -48 112 5V
IOPIN -48 112 In
FLAG 1184 128 Vbat
IOPIN 1184 128 In
FLAG 928 336 0
FLAG 1184 400 0
SYMBOL OpAmps\\LTC6079 704 144 R0
SYMATTR InstName U1
SYMBOL voltage -528 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -528 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(5.9 6.2 0 1u 1u 50m 100m)
SYMBOL res 624 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value R=R1
SYMBOL res 720 272 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value R=R2
SYMBOL res 528 144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -1 57 VBottom 2
SYMATTR InstName R3
SYMATTR Value R=R3
SYMBOL res 656 112 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value R=R4
SYMBOL OpAmps\\LTC6079 176 256 R0
SYMATTR InstName U2
SYMBOL res 48 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value R=R5
SYMBOL res 112 400 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value R=R6
SYMBOL res 112 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value R=R7
SYMBOL res 128 128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value R=R8
SYMBOL pmos 1136 288 M180
SYMATTR InstName M3
SYMATTR Value irf9z24n
SYMATTR Prefix X
SYMATTR SpiceModel irf9z24n
SYMBOL nmos 880 176 R0
SYMATTR InstName M4
SYMATTR Value 2N7002
SYMBOL res 1024 144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 86k
SYMBOL res 1168 288 R0
SYMATTR InstName R9
SYMATTR Value 18
TEXT 568 512 Left 2 !.param R1 = 3.3k
TEXT 568 544 Left 2 !.param R2 = 22*R1
TEXT 568 584 Left 2 !.param R3 = 120k
TEXT 568 616 Left 2 !.param R4 = 0.365*R3
TEXT -560 328 Left 2 !.tran 1
TEXT 32 496 Left 2 !.param R5 = 120k
TEXT 32 528 Left 2 !.param R6 = 1.27*R5
TEXT 32 560 Left 2 !.param R7 = R5
TEXT 32 592 Left 2 !.param R8 = R6
TEXT 1288 -208 Left 2 !.inc irf9z24n.lib
